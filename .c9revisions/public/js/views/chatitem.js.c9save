{"ts":1358111027161,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"define(['SocialNetView', 'text!templates/chatitem.html'],\nfunction(SocialNetView, chatItemTemplate) {\n  var chatItemView = SocialNetView.extend({\n    tagName: 'li',\n\n    $el: $(this.el),\n\n    events: {\n      'click': 'startChatSession',\n    },\n\n    initialize: function(options) {\n      var accountId = this.model.get('accountId');\n      options.socketEvents.bind(\n        'login:' + accountId,\n        this.handleContactLogin,\n        this\n      );\n      options.socketEvents.bind(\n        'logout:' + accountId,\n        this.handleContactLogout,\n        this\n      );\n      options.socketEvents.bind(\n        'socket:chat:start:' + accountId,\n        this.startChatSession,\n        this\n      );\n    },\n\n    handleContactLogin: function() {\n      this.model.set('online', true);\n      this.$el.find('.online_indicator').addClass('online');\n    },\n\n    handleContactLogout: function() {\n      this.model.set('online', false);\n      $onlineIndicator = this.$el.find('.online_indicator');\n      while ( $onlineIndicator.hasClass('online') ) {\n        $onlineIndicator.removeClass('online');\n      }\n    },\n\n    startChatSession: function() {\n      this.trigger('chat:start', this.model);\n    },\n\n    render: function() {\n      this.$el.html(_.template(chatItemTemplate, {\n        model: this.model.toJSON()\n      }));\n      if ( this.model.get('online') ) this.handleContactLogin();\n      return this;\n    }\n  });\n\n  return chatItemView;\n});"]],"start1":0,"start2":0,"length1":0,"length2":1440}]],"length":1440}
{"contributors":[],"silentsave":false,"ts":1358111032188,"patch":[[{"diffs":[[0,"html'],\n"],[1,"\n"],[0,"function"]],"start1":50,"start2":50,"length1":16,"length2":17},{"diffs":[[0,"late) {\n"],[1,"  "],[0,"  var ch"]],"start1":95,"start2":95,"length1":16,"length2":18},{"diffs":[[0,"xtend({\n"],[1,"    "],[0,"    tagN"]],"start1":141,"start2":141,"length1":16,"length2":20},{"diffs":[[0,"',\n\n    "],[1,"  "],[1,"  "],[0,"$el: $(t"]],"start1":169,"start2":169,"length1":16,"length2":20},{"diffs":[[0,"s.el),\n\n"],[1,"    "],[0,"    even"]],"start1":191,"start2":191,"length1":16,"length2":20},{"diffs":[[0,"{\n      "],[1," "],[1,"     "],[0,"'click':"]],"start1":215,"start2":215,"length1":16,"length2":22},{"diffs":[[0,"ssion',\n    "],[1,"  "],[1,"  "],[0,"},\n\n"],[1,"    "],[0,"    initiali"]],"start1":250,"start2":250,"length1":28,"length2":36},{"diffs":[[0,"ns) {\n      "],[1," "],[1,"     "],[0,"var accountI"]],"start1":304,"start2":304,"length1":24,"length2":30},{"diffs":[[0,"ccountId');\n"],[1,"      "],[0,"      option"]],"start1":355,"start2":355,"length1":24,"length2":30},{"diffs":[[0,"Events.bind("],[-1,"\n        "],[0,"'login:' + a"]],"start1":393,"start2":393,"length1":33,"length2":24},{"diffs":[[0,":' + accountId,\n"],[1,"    "],[0,"        this.han"]],"start1":411,"start2":411,"length1":32,"length2":36},{"diffs":[[0,"in,\n        "],[1,"    "],[0,"this"],[1,");"],[0,"\n      "],[-1,");\n"],[0,"      option"]],"start1":460,"start2":460,"length1":38,"length2":41},{"diffs":[[0,"ts.bind("],[-1,"\n        "],[0,"'logout:"]],"start1":513,"start2":513,"length1":25,"length2":16},{"diffs":[[0,"ountId,\n        "],[1,"  "],[1,"  "],[0,"this.handleConta"]],"start1":536,"start2":536,"length1":32,"length2":36},{"diffs":[[0,"ut,\n        "],[1,"    "],[0,"this"],[1,");"],[0,"\n      "],[-1,");\n"],[0,"      option"]],"start1":578,"start2":578,"length1":38,"length2":41},{"diffs":[[0,"ts.bind("],[-1,"\n        "],[0,"'socket:"]],"start1":631,"start2":631,"length1":25,"length2":16},{"diffs":[[0,"Id,\n        "],[1,"    "],[0,"this.startCh"]],"start1":669,"start2":669,"length1":24,"length2":28},{"diffs":[[0,"ession,\n"],[1,"    "],[0,"        "]],"start1":700,"start2":700,"length1":16,"length2":20},{"diffs":[[0,"this"],[1,");"],[0,"\n     "],[-1," );\n"],[0,"   "],[-1," "],[0,"},\n\n"],[1,"    "],[0,"    "]],"start1":720,"start2":720,"length1":26,"length2":27},{"diffs":[[0,"ction() {\n      "],[1,"   "],[1,"   "],[0,"this.model.set('"]],"start1":770,"start2":770,"length1":32,"length2":38},{"diffs":[[0,"ne', true);\n"],[1,"      "],[0,"      this.$"]],"start1":812,"start2":812,"length1":24,"length2":30},{"diffs":[[0,"('online');\n"],[1,"    "],[0,"    },\n\n    "]],"start1":879,"start2":879,"length1":24,"length2":28},{"diffs":[[0,"    },\n\n    "],[1,"  "],[1,"  "],[0,"handleContac"]],"start1":895,"start2":895,"length1":24,"length2":28},{"diffs":[[0,"n() {\n      "],[1,"     "],[1," "],[0,"this.model.s"]],"start1":939,"start2":939,"length1":24,"length2":30},{"diffs":[[0,"e', false);\n"],[1,"      "],[0,"      $onlin"]],"start1":978,"start2":978,"length1":24,"length2":30},{"diffs":[[0,"ndicator');\n"],[1,"      "],[0,"      while "]],"start1":1045,"start2":1045,"length1":24,"length2":30},{"diffs":[[0," while ("],[-1," "],[0,"$onlineI"]],"start1":1068,"start2":1068,"length1":17,"length2":16},{"diffs":[[0,"online')"],[-1," "],[0,") {\n    "]],"start1":1103,"start2":1103,"length1":17,"length2":16},{"diffs":[[0,"ne')) {\n        "],[1,"       "],[1," "],[0,"$onlineIndicator"]],"start1":1107,"start2":1107,"length1":32,"length2":40},{"diffs":[[0,"('online');\n"],[1,"      "],[0,"      }\n    "]],"start1":1159,"start2":1159,"length1":24,"length2":30},{"diffs":[[0,"  }\n    "],[1," "],[1,"   "],[0,"},\n\n    "],[1,"   "],[1," "],[0,"startCha"]],"start1":1181,"start2":1181,"length1":24,"length2":32},{"diffs":[[0,"n: function() {\n"],[1,"      "],[0,"      this.trigg"]],"start1":1220,"start2":1220,"length1":32,"length2":38},{"diffs":[[0,"model);\n    "],[-1,"},\n\n"],[1,"    },\n\n    "],[0,"    render: "]],"start1":1280,"start2":1280,"length1":28,"length2":36},{"diffs":[[0,"unction() {\n"],[1,"      "],[0,"      this.$"]],"start1":1317,"start2":1317,"length1":24,"length2":30},{"diffs":[[0,"late, {\n"],[1,"        "],[0,"        "]],"start1":1378,"start2":1378,"length1":16,"length2":24},{"diffs":[[0,"oJSON()\n"],[1,"      "],[0,"      })"]],"start1":1421,"start2":1421,"length1":16,"length2":22},{"diffs":[[0,"    "],[1," "],[1,"     "],[0,"if ("],[-1," "],[0,"this"]],"start1":1448,"start2":1448,"length1":13,"length2":18},{"diffs":[[0,"online')"],[-1," "],[0,") this.h"]],"start1":1478,"start2":1478,"length1":17,"length2":16},{"diffs":[[0,"ogin();\n"],[1,"      "],[0,"      re"]],"start1":1507,"start2":1507,"length1":16,"length2":22},{"diffs":[[0,"    "],[1," "],[1,"   "],[0,"}\n  "],[1," "],[1," "],[0,"});\n\n"],[1,"  "],[0,"  re"]],"start1":1540,"start2":1540,"length1":17,"length2":25}]],"length":1587,"saved":false}
{"contributors":[],"silentsave":false,"ts":1358186067628,"patch":[[{"diffs":[[0,"e);\n            "],[1,"var  "],[0,"$onlineIndicator"]],"start1":986,"start2":986,"length1":32,"length2":37}]],"length":1592,"saved":false}
