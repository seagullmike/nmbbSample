{"ts":1357692525789,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"define(['SocialNetView', 'text!templates/profile.html',\n        'text!templates/status.html', 'models/Status',\n        'views/Status'],\nfunction(SocialNetView,  profileTemplate,\n         statusTemplate, Status, StatusView)\n{\n  var profileView = SocialNetView.extend({\n    el: $('#content'),\n\n    events: {\n      \"submit form\": \"postStatus\"\n    },\n\n    initialize: function (options) {\n      this.socketEvents = options.socketEvents;\n      this.model.bind('change', this.render, this);\n    },\n\n    postStatus: function() {\n      var that = this;\n      var statusText = $('input[name=status]').val();\n      var statusCollection = this.collection;\n      $.post('/accounts/' + this.model.get('_id') + '/status', {\n        status: statusText\n      });\n      return false;\n    },\n\n    onSocketStatusAdded: function(data) {\n      var newStatus = data.data;\n      this.prependStatus(new Status({status:newStatus.status,name:newStatus.name}))\n    },\n\n    prependStatus: function(statusModel) {\n      var statusHtml = (new StatusView({ model: statusModel })).render().el;\n      $(statusHtml).prependTo('.status_list').hide().fadeIn('slow');\n    },\n\n    render: function() {\n      if ( this.model.get('_id')) {\n        this.socketEvents.bind('status:' + this.model.get('_id'), this.onSocketStatusAdded, this );\n      }\n      var that = this;\n      this.$el.html(\n        _.template(profileTemplate,this.model.toJSON())\n      );\n\n      var statusCollection = this.model.get('status');\n      if ( null != statusCollection ) {\n        _.each(statusCollection, function (statusJson) {\n          var statusModel = new Status(statusJson);\n          that.prependStatus(statusModel);\n        });\n      }\n    }\n  });\n\n  return profileView;\n});\n"]],"start1":0,"start2":0,"length1":0,"length2":1724}]],"length":1724}
{"contributors":[],"silentsave":false,"ts":1357692536121,"patch":[[{"diffs":[[0," 'views/"],[-1,"S"],[1,"s"],[0,"tatus'],"]],"start1":118,"start2":118,"length1":17,"length2":17}]],"length":1724,"saved":false}
{"contributors":[],"silentsave":false,"ts":1358111245182,"patch":[[{"diffs":[[0,"e.html',"],[-1,"\n       "],[0," 'text!t"]],"start1":47,"start2":47,"length1":24,"length2":16},{"diffs":[[0,"Status',"],[-1,"\n       "],[0," 'views/"]],"start1":94,"start2":94,"length1":24,"length2":16},{"diffs":[[0,"atus'],\n"],[1,"\n"],[0,"function"]],"start1":112,"start2":112,"length1":16,"length2":17},{"diffs":[[0,"NetView,"],[-1," "],[0," profile"]],"start1":136,"start2":136,"length1":17,"length2":16},{"diffs":[[0,"mplate,\n"],[-1,"         "],[0,"statusTe"]],"start1":154,"start2":154,"length1":25,"length2":16},{"diffs":[[0,"iew)"],[-1,"\n"],[1," "],[0,"{\n"],[1,"  "],[0,"  va"]],"start1":193,"start2":193,"length1":11,"length2":13},{"diffs":[[0,"d({\n    "],[1,"  "],[1,"  "],[0,"el: $('#"]],"start1":241,"start2":241,"length1":16,"length2":20},{"diffs":[[0,"ent'),\n\n"],[1,"    "],[0,"    even"]],"start1":265,"start2":265,"length1":16,"length2":20},{"diffs":[[0,"{\n      "],[1,"     "],[1," "],[0,"\"submit "]],"start1":289,"start2":289,"length1":16,"length2":22},{"diffs":[[0,"Status\"\n"],[1,"    "],[0,"    },\n\n"]],"start1":323,"start2":323,"length1":16,"length2":20},{"diffs":[[0,"},\n\n    "],[1," "],[1,"   "],[0,"initiali"]],"start1":339,"start2":339,"length1":16,"length2":20},{"diffs":[[0,"function"],[-1," "],[0,"(options"]],"start1":363,"start2":363,"length1":17,"length2":16},{"diffs":[[0,"ns) {\n      "],[1," "],[1,"     "],[0,"this.socketE"]],"start1":377,"start2":377,"length1":24,"length2":30},{"diffs":[[0,"Events;\n"],[1,"      "],[0,"      th"]],"start1":429,"start2":429,"length1":16,"length2":22},{"diffs":[[0," this);\n    "],[-1,"},\n\n"],[1,"    },\n\n    "],[0,"    postStat"]],"start1":487,"start2":487,"length1":28,"length2":36},{"diffs":[[0,"n() {\n      "],[1,"   "],[1,"   "],[0,"var that = t"]],"start1":534,"start2":534,"length1":24,"length2":30},{"diffs":[[0,"hat = this;\n"],[1,"      "],[0,"      var st"]],"start1":557,"start2":557,"length1":24,"length2":30},{"diffs":[[0,"al();\n      "],[1," "],[1,"     "],[0,"var statusCo"]],"start1":623,"start2":623,"length1":24,"length2":30},{"diffs":[[0,"ection;\n"],[1,"      "],[0,"      $."]],"start1":673,"start2":673,"length1":16,"length2":22},{"diffs":[[0,"tus', {\n"],[1,"        "],[0,"        "]],"start1":744,"start2":744,"length1":16,"length2":24},{"diffs":[[0,"sText\n      "],[1,"   "],[1,"   "],[0,"});\n"],[1,"      "],[0,"      return"]],"start1":781,"start2":781,"length1":28,"length2":40},{"diffs":[[0," false;\n    "],[1,"  "],[1,"  "],[0,"},\n\n"],[1,"    "],[0,"    onSocket"]],"start1":821,"start2":821,"length1":28,"length2":36},{"diffs":[[0,"ta) {\n      "],[1,"     "],[1," "],[0,"var newStatu"]],"start1":881,"start2":881,"length1":24,"length2":30},{"diffs":[[0,"data;\n      "],[1,"     "],[1," "],[0,"this.prepend"]],"start1":920,"start2":920,"length1":24,"length2":30},{"diffs":[[0,"Status({"],[1,"\n                "],[0,"status:"],[1," "],[0,"newStatu"]],"start1":961,"start2":961,"length1":23,"length2":41},{"diffs":[[0,"tus,"],[1,"\n                "],[0,"name:"],[1," "],[0,"newS"]],"start1":1007,"start2":1007,"length1":13,"length2":31},{"diffs":[[0,"name"],[1,"\n            "],[0,"}))\n    "],[1,"   "],[1," "],[0,"},\n\n"],[1,"    "],[0,"    "]],"start1":1044,"start2":1044,"length1":20,"length2":41},{"diffs":[[0,"el) {\n      "],[1," "],[1,"     "],[0,"var statusHt"]],"start1":1118,"start2":1118,"length1":24,"length2":30},{"diffs":[[0,"usView({"],[1,"\n               "],[0," model: "]],"start1":1162,"start2":1162,"length1":16,"length2":32},{"diffs":[[0,"tusModel"],[1,"\n           "],[0," })).ren"]],"start1":1197,"start2":1197,"length1":16,"length2":28},{"diffs":[[0,"r().el;\n"],[1,"      "],[0,"      $("]],"start1":1227,"start2":1227,"length1":16,"length2":22},{"diffs":[[0,"In('slow');\n"],[1,"    "],[0,"    },\n\n    "]],"start1":1298,"start2":1298,"length1":24,"length2":28},{"diffs":[[0,"},\n\n    "],[1," "],[1,"   "],[0,"render: "]],"start1":1318,"start2":1318,"length1":16,"length2":20},{"diffs":[[0,"unction() {\n"],[1,"      "],[0,"      if ( t"]],"start1":1339,"start2":1339,"length1":24,"length2":30},{"diffs":[[0,"    if ("],[-1," "],[0,"this.mod"]],"start1":1359,"start2":1359,"length1":17,"length2":16},{"diffs":[[0,"t('_id')) {\n"],[1,"        "],[0,"        this"]],"start1":1380,"start2":1380,"length1":24,"length2":32},{"diffs":[[0,"ed, this"],[-1," "],[0,");\n     "]],"start1":1488,"start2":1488,"length1":17,"length2":16},{"diffs":[[0,"his);\n      "],[1,"  "],[-1,"}\n"],[1,"    }\n      "],[0,"      var th"]],"start1":1493,"start2":1493,"length1":26,"length2":38},{"diffs":[[0,"this;\n      "],[1," "],[1,"     "],[0,"this.$el.htm"]],"start1":1536,"start2":1536,"length1":24,"length2":30},{"diffs":[[0,"        "],[1," "],[1,"   "],[0,"_.templa"]],"start1":1569,"start2":1569,"length1":16,"length2":20},{"diffs":[[0,"emplate,"],[1," "],[0,"this.mod"]],"start1":1600,"start2":1600,"length1":16,"length2":17},{"diffs":[[0,"N())"],[1,")"],[1,";\n"],[0,"\n      "],[-1,");\n\n"],[0,"    "]],"start1":1625,"start2":1625,"length1":19,"length2":18},{"diffs":[[0,"('status');\n"],[1,"      "],[0,"      if ( n"]],"start1":1682,"start2":1682,"length1":24,"length2":30},{"diffs":[[0,"    if ("],[-1," "],[0,"null != "]],"start1":1702,"start2":1702,"length1":17,"length2":16},{"diffs":[[0,"tion"],[-1," "],[0,") {\n"],[1,"        "],[0,"    "]],"start1":1730,"start2":1730,"length1":13,"length2":20},{"diffs":[[0,"function"],[-1," "],[0,"(statusJ"]],"start1":1779,"start2":1779,"length1":17,"length2":16},{"diffs":[[0,"atusJson) {\n"],[1,"          "],[0,"          va"]],"start1":1790,"start2":1790,"length1":24,"length2":34},{"diffs":[[0,"sJson);\n"],[1,"          "],[0,"        "]],"start1":1856,"start2":1856,"length1":16,"length2":26},{"diffs":[[0,"    "],[1," "],[-1,"});\n      }\n"],[1,"       });\n            }\n   "],[0,"    "],[1," "],[0,"}\n"],[1,"  "],[0,"  });\n\n"],[1,"  "],[0,"  re"]],"start1":1921,"start2":1921,"length1":33,"length2":55}]],"length":1998,"saved":false}
{"contributors":[],"silentsave":false,"ts":1358118756600,"patch":[[{"diffs":[[0,"eIn("],[-1,"'slow'"],[0,");\n "]],"start1":1297,"start2":1297,"length1":14,"length2":8},{"diffs":[[0,"(null !="],[1,"="],[0," statusC"]],"start1":1703,"start2":1703,"length1":16,"length2":17}]],"length":1993,"saved":false}
{"ts":1358118775975,"patch":[[{"diffs":[[0,") {\n            "],[1,"//"],[0,"var that = this;"]],"start1":536,"start2":536,"length1":32,"length2":34},{"diffs":[[0,"();\n            "],[1,"//"],[0,"var statusCollec"]],"start1":627,"start2":627,"length1":32,"length2":34}]],"length":1997,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364747463763,"patch":[[{"diffs":[[0,"s.model."],[-1,"bind"],[1,"on"],[0,"('change"]],"start1":452,"start2":452,"length1":20,"length2":18},{"diffs":[[0,"nts."],[-1,"bind"],[1,"on"],[0,"('st"]],"start1":1418,"start2":1418,"length1":12,"length2":10}]],"length":1993,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364762420685,"patch":[[{"diffs":[[0,"     }))"],[1,";"],[0,"\n       "]],"start1":1058,"start2":1058,"length1":16,"length2":17},{"diffs":[[0,";\n            }\n"],[1,"\n"],[0,"            var "]],"start1":1492,"start2":1492,"length1":32,"length2":33}]],"length":1995,"saved":false}
{"ts":1364762444915,"patch":[[{"diffs":[[0,"emplate,"],[-1,"\n"],[1," "],[0,"statusTe"]],"start1":153,"start2":153,"length1":17,"length2":17}]],"length":1995,"saved":false}
