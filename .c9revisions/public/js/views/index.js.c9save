{"ts":1357692448193,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"define(['SocialNetView', 'text!templates/index.html',\n        'views/status', 'models/Status'],\nfunction(SocialNetView, indexTemplate, StatusView, Status) {\n  var indexView = SocialNetView.extend({\n    el: $('#content'),\n\n    events: {\n      \"submit form\": \"updateStatus\"\n    },\n\n    initialize: function(options) {\n      options.socketEvents.bind('status:me', this.onSocketStatusAdded, this );\n      this.collection.on('add', this.onStatusAdded, this);\n      this.collection.on('reset', this.onStatusCollectionReset, this);\n    },\n\n    onStatusCollectionReset: function(collection) {\n      var that = this;\n      collection.each(function (model) {\n        that.onStatusAdded(model);\n      });\n    },\n\n    onSocketStatusAdded: function(data) {\n      var newStatus = data.data;\n      var found = false;\n      this.collection.forEach(function(status) {\n        var name = status.get('name');\n        if ( name && name.full == newStatus.name.full && status.get('status') == newStatus.status ) {\n          found = true;\n        }\n      });\n      if (!found ) {\n        this.collection.add(new Status({status:newStatus.status,name:newStatus.name}))\n      }\n    },\n\n    onStatusAdded: function(status) {\n      var statusHtml = (new StatusView({ model: status })).render().el;\n      $(statusHtml).prependTo('.status_list').hide().fadeIn('slow');\n    },\n\n    updateStatus: function() {\n      var statusText = $('input[name=status]').val();\n      var statusCollection = this.collection;\n      $.post('/accounts/me/status', {\n        status: statusText\n      }); // New: no longer adding to screen\n      return false;\n    },\n\n    render: function() {\n      this.$el.html(indexTemplate);\n    }\n  });\n\n  return indexView;\n});\n"]],"start1":0,"start2":0,"length1":0,"length2":1714}]],"length":1714}
{"contributors":[],"silentsave":false,"ts":1358111232598,"patch":[[{"diffs":[[0,"x.html',"],[-1,"\n       "],[0," 'views/"]],"start1":45,"start2":45,"length1":24,"length2":16},{"diffs":[[0,"atus'],\n"],[1,"\n"],[0,"function"]],"start1":80,"start2":80,"length1":16,"length2":17},{"diffs":[[0,"atus) {\n"],[1,"  "],[0,"  var in"]],"start1":142,"start2":142,"length1":16,"length2":18},{"diffs":[[0,"xtend({\n"],[1,"    "],[0,"    el: "]],"start1":185,"start2":185,"length1":16,"length2":20},{"diffs":[[0,"ent'),\n\n"],[1,"    "],[0,"    even"]],"start1":213,"start2":213,"length1":16,"length2":20},{"diffs":[[0,"{\n      "],[1," "],[1,"     "],[0,"\"submit "]],"start1":237,"start2":237,"length1":16,"length2":22},{"diffs":[[0,"Status\"\n"],[1,"    "],[0,"    },\n\n"]],"start1":273,"start2":273,"length1":16,"length2":20},{"diffs":[[0,"},\n\n    "],[1,"  "],[1,"  "],[0,"initiali"]],"start1":289,"start2":289,"length1":16,"length2":20},{"diffs":[[0,"(options) {\n"],[1,"      "],[0,"      option"]],"start1":321,"start2":321,"length1":24,"length2":30},{"diffs":[[0,"ed, this"],[-1," "],[0,");\n     "]],"start1":406,"start2":406,"length1":17,"length2":16},{"diffs":[[0,"d, this);\n      "],[1,"  "],[1,"    "],[0,"this.collection."]],"start1":407,"start2":407,"length1":32,"length2":38},{"diffs":[[0,"ded, this);\n"],[1,"      "],[0,"      this.c"]],"start1":470,"start2":470,"length1":24,"length2":30},{"diffs":[[0," this);\n    "],[-1,"},\n\n"],[1,"    },\n\n    "],[0,"    onStatus"]],"start1":551,"start2":551,"length1":28,"length2":36},{"diffs":[[0,"on) {\n      "],[1,"   "],[1,"   "],[0,"var that = t"]],"start1":621,"start2":621,"length1":24,"length2":30},{"diffs":[[0,";\n      "],[1,"   "],[1,"   "],[0,"collecti"]],"start1":654,"start2":654,"length1":16,"length2":22},{"diffs":[[0,"function"],[-1," "],[0,"(model) "]],"start1":684,"start2":684,"length1":17,"length2":16},{"diffs":[[0,"        "],[1," "],[1,"       "],[0,"that.onS"]],"start1":702,"start2":702,"length1":16,"length2":24},{"diffs":[[0,"model);\n"],[1,"      "],[0,"      })"]],"start1":737,"start2":737,"length1":16,"length2":22},{"diffs":[[0,"    });\n    "],[1," "],[1,"   "],[0,"},\n\n"],[1,"    "],[0,"    onSocket"]],"start1":753,"start2":753,"length1":28,"length2":36},{"diffs":[[0,"ion(data) {\n"],[1,"      "],[0,"      var ne"]],"start1":807,"start2":807,"length1":24,"length2":30},{"diffs":[[0,"data;\n      "],[1,"     "],[1," "],[0,"var found = "]],"start1":852,"start2":852,"length1":24,"length2":30},{"diffs":[[0,"nd = false;\n"],[1,"      "],[0,"      this.c"]],"start1":877,"start2":877,"length1":24,"length2":30},{"diffs":[[0,") {\n        "],[1,"    "],[1,"    "],[0,"var name = s"]],"start1":940,"start2":940,"length1":24,"length2":32},{"diffs":[[0,"et('name');\n"],[1,"        "],[0,"        if ("]],"start1":979,"start2":979,"length1":24,"length2":32},{"diffs":[[0,"    if ("],[-1," "],[0,"name && "]],"start1":1003,"start2":1003,"length1":17,"length2":16},{"diffs":[[0,"s.status"],[-1," "],[0,") {\n    "]],"start1":1087,"start2":1087,"length1":17,"length2":16},{"diffs":[[0,"        "],[1,"       "],[1,"   "],[0,"found = "]],"start1":1101,"start2":1101,"length1":16,"length2":26},{"diffs":[[0,"= true;\n"],[1,"        "],[0,"        "]],"start1":1125,"start2":1125,"length1":16,"length2":24},{"diffs":[[0,"}\n      "],[-1,"});\n"],[1,"      });\n     "],[0,"      "],[1," "],[0,"if (!fou"]],"start1":1149,"start2":1149,"length1":26,"length2":38},{"diffs":[[0,"ound"],[-1," "],[0,") {\n"],[1,"        "],[0,"    "]],"start1":1185,"start2":1185,"length1":13,"length2":20},{"diffs":[[0,"Status({"],[1,"\n                    "],[0,"status:"],[1," "],[0,"newStatu"]],"start1":1233,"start2":1233,"length1":23,"length2":45},{"diffs":[[0,"tus,"],[1,"\n                    "],[0,"name:"],[1," "],[0,"newS"]],"start1":1283,"start2":1283,"length1":13,"length2":35},{"diffs":[[0,"name"],[-1,"}))\n      }\n"],[1,"\n                }))\n            }\n   "],[0,"    "],[1," "],[0,"},\n\n"],[1,"    "],[0,"    "]],"start1":1324,"start2":1324,"length1":28,"length2":59},{"diffs":[[0,"status) {\n      "],[1," "],[1,"     "],[0,"var statusHtml ="]],"start1":1407,"start2":1407,"length1":32,"length2":38},{"diffs":[[0,"usView({"],[1,"\n               "],[0," model: "]],"start1":1455,"start2":1455,"length1":16,"length2":32},{"diffs":[[0,": status"],[1,"\n           "],[0," })).ren"]],"start1":1485,"start2":1485,"length1":16,"length2":28},{"diffs":[[0,"r().el;\n"],[1,"      "],[0,"      $("]],"start1":1515,"start2":1515,"length1":16,"length2":22},{"diffs":[[0,"slow');\n"],[1,"    "],[0,"    },\n\n"],[1,"    "],[0,"    upda"]],"start1":1590,"start2":1590,"length1":24,"length2":32},{"diffs":[[0,"unction() {\n"],[1,"      "],[0,"      var st"]],"start1":1633,"start2":1633,"length1":24,"length2":30},{"diffs":[[0,"al();\n      "],[1," "],[1,"     "],[0,"var statusCo"]],"start1":1699,"start2":1699,"length1":24,"length2":30},{"diffs":[[0,";\n      "],[1,"     "],[1," "],[0,"$.post('"]],"start1":1755,"start2":1755,"length1":16,"length2":22},{"diffs":[[0,"tus', {\n"],[1,"        "],[0,"        "]],"start1":1793,"start2":1793,"length1":16,"length2":24},{"diffs":[[0,"t\n      "],[1,"  "],[1,"    "],[0,"}); // N"]],"start1":1834,"start2":1834,"length1":16,"length2":22},{"diffs":[[0," screen\n"],[1,"      "],[0,"      re"]],"start1":1879,"start2":1879,"length1":16,"length2":22},{"diffs":[[0," false;\n    "],[1," "],[1,"   "],[0,"},\n\n"],[1,"    "],[0,"    render: "]],"start1":1905,"start2":1905,"length1":28,"length2":36},{"diffs":[[0,"n() {\n      "],[1,"    "],[1,"  "],[0,"this.$el.htm"]],"start1":1948,"start2":1948,"length1":24,"length2":30},{"diffs":[[0,"e);\n"],[1,"    "],[0,"    }\n"],[1,"  "],[0,"  });\n\n"],[1,"  "],[0,"  re"]],"start1":1992,"start2":1992,"length1":21,"length2":29}]],"length":2041,"saved":false}
{"contributors":[],"silentsave":false,"ts":1358117946957,"patch":[[{"diffs":[[0,"eIn("],[-1,"'slow'"],[0,");\n "]],"start1":1585,"start2":1585,"length1":14,"length2":8},{"diffs":[[0,"        "],[1,"}).done(function(data) {console.log(data)"],[0,"}); // N"]],"start1":1834,"start2":1834,"length1":16,"length2":57}]],"length":2076,"saved":false}
