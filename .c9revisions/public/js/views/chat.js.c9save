{"ts":1358111014716,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"define(['SocialNetView', 'views/chatsession', 'views/chatitem', 'text!templates/chat.html'],\nfunction(SocialNetView, ChatSessionView, ChatItemView, chatItemTemplate) {\n  var chatView = SocialNetView.extend({\n    el: $('#chat'),\n\n    chatSessions: {},\n\n    initialize: function(options) {\n      this.socketEvents = options.socketEvents;\n      this.collection.on('reset', this.renderCollection, this);\n    },\n\n    render: function() {\n      this.$el.html(chatItemTemplate);\n    },\n\n    startChatSession: function(model) {\n      var accountId = model.get('accountId');\n      if ( !this.chatSessions[accountId]) {\n        var chatSessionView = new ChatSessionView({model:model, socketEvents: this.socketEvents});\n        this.$el.prepend(chatSessionView.render().el);\n        this.chatSessions[accountId] = chatSessionView;\n      }\n    },\n\n    renderCollection: function(collection) {\n      var that = this;\n      $('.chat_list').empty();\n      collection.each(function(contact) {\n        var chatItemView = new ChatItemView({ socketEvents: that.socketEvents, model: contact });\n        chatItemView.bind('chat:start', that.startChatSession, that);\n        var statusHtml = (chatItemView).render().el;\n        $(statusHtml).appendTo('.chat_list');\n      });\n    }\n  });\n\n  return chatView;\n});\n"]],"start1":0,"start2":0,"length1":0,"length2":1290}]],"length":1290}
{"contributors":[],"silentsave":false,"ts":1358111022662,"patch":[[{"diffs":[[0,"html'],\n"],[1,"\n"],[0,"function"]],"start1":85,"start2":85,"length1":16,"length2":17},{"diffs":[[0,"late) {\n"],[1,"  "],[0,"  var ch"]],"start1":161,"start2":161,"length1":16,"length2":18},{"diffs":[[0,"xtend({\n"],[1,"    "],[0,"    el: "]],"start1":203,"start2":203,"length1":16,"length2":20},{"diffs":[[0,"hat'),\n\n    "],[1,"   "],[1," "],[0,"chatSessions"]],"start1":228,"start2":228,"length1":24,"length2":28},{"diffs":[[0,"sions: {},\n\n"],[1,"    "],[0,"    initiali"]],"start1":251,"start2":251,"length1":24,"length2":28},{"diffs":[[0,"ns) {\n      "],[1,"    "],[1,"  "],[0,"this.socketE"]],"start1":297,"start2":297,"length1":24,"length2":30},{"diffs":[[0,"Events;\n"],[1,"      "],[0,"      th"]],"start1":349,"start2":349,"length1":16,"length2":22},{"diffs":[[0," this);\n    "],[1," "],[1,"   "],[0,"},\n\n"],[1,"    "],[0,"    render: "]],"start1":419,"start2":419,"length1":28,"length2":36},{"diffs":[[0,"n() {\n      "],[1," "],[1,"     "],[0,"this.$el.htm"]],"start1":462,"start2":462,"length1":24,"length2":30},{"diffs":[[0,"plate);\n"],[1,"    "],[0,"    },\n\n"],[1,"    "],[0,"    star"]],"start1":505,"start2":505,"length1":24,"length2":32},{"diffs":[[0,"el) {\n      "],[1,"     "],[1," "],[0,"var accountI"]],"start1":563,"start2":563,"length1":24,"length2":30},{"diffs":[[0,"ccountId');\n"],[1,"      "],[0,"      if ( !"]],"start1":609,"start2":609,"length1":24,"length2":30},{"diffs":[[0,"    if ("],[-1," "],[0,"!this.ch"]],"start1":629,"start2":629,"length1":17,"length2":16},{"diffs":[[0,"tId]) {\n        "],[1," "],[1,"       "],[0,"var chatSessionV"]],"start1":662,"start2":662,"length1":32,"length2":40},{"diffs":[[0,"ew({"],[1,"\n                    "],[0,"model:"],[1," "],[0,"model,"],[1,"\n                   "],[0," soc"]],"start1":725,"start2":725,"length1":20,"length2":62},{"diffs":[[0,"etEvents"],[-1,"});\n"],[1,"\n                });\n        "],[0,"        "]],"start1":807,"start2":807,"length1":20,"length2":45},{"diffs":[[0,"l);\n        "],[1,"   "],[1,"     "],[0,"this.chatSes"]],"start1":895,"start2":895,"length1":24,"length2":32},{"diffs":[[0,"onView;\n"],[1,"      "],[0,"      }\n"]],"start1":955,"start2":955,"length1":16,"length2":22},{"diffs":[[0,"  }\n    "],[1," "],[1,"   "],[0,"},\n\n    "],[1,"   "],[1," "],[0,"renderCo"]],"start1":973,"start2":973,"length1":24,"length2":32},{"diffs":[[0,"llection) {\n"],[1,"      "],[0,"      var th"]],"start1":1026,"start2":1026,"length1":24,"length2":30},{"diffs":[[0,";\n      "],[1,"  "],[1,"    "],[0,"$('.chat"]],"start1":1065,"start2":1065,"length1":16,"length2":22},{"diffs":[[0,";\n      "],[1,"    "],[1,"  "],[0,"collecti"]],"start1":1102,"start2":1102,"length1":16,"length2":22},{"diffs":[[0,"tact) {\n        "],[1,"       "],[1," "],[0,"var chatItemView"]],"start1":1144,"start2":1144,"length1":32,"length2":40},{"diffs":[[0,"emView({"],[1,"\n                   "],[0," socketE"]],"start1":1197,"start2":1197,"length1":16,"length2":36},{"diffs":[[0,"nts,"],[-1," model: contact"],[1,"\n                    model: contact\n               "],[0," });"]],"start1":1254,"start2":1254,"length1":23,"length2":59},{"diffs":[[0,"});\n        "],[1,"    "],[1,"    "],[0,"chatItemView"]],"start1":1310,"start2":1310,"length1":24,"length2":32},{"diffs":[[0," that);\n"],[1,"        "],[0,"        "]],"start1":1384,"start2":1384,"length1":16,"length2":24},{"diffs":[[0,"        "],[1,"     "],[1,"   "],[0,"$(status"]],"start1":1453,"start2":1453,"length1":16,"length2":24},{"diffs":[[0,"hat_list');\n"],[1,"      "],[0,"      });\n  "]],"start1":1495,"start2":1495,"length1":24,"length2":30},{"diffs":[[0,"    "],[1," "],[1,"   "],[0,"}\n  "],[1," "],[1," "],[0,"});\n\n"],[1,"  "],[0,"  re"]],"start1":1523,"start2":1523,"length1":17,"length2":25}]],"length":1567,"saved":false}
{"ts":1364747411520,"patch":[[{"diffs":[[0,"iew."],[-1,"bind"],[1,"on"],[0,"('ch"]],"start1":1339,"start2":1339,"length1":12,"length2":10}]],"length":1565,"saved":false}
{"contributors":[],"silentsave":false,"ts":1364822348615,"patch":[[{"diffs":[[0,"            "],[1,"this.listenTo(this.collection,'reset',this.renderCollection);\n            //"],[0,"this.collect"]],"start1":357,"start2":357,"length1":24,"length2":100}]],"length":1641,"saved":false}
